# Migration Guide: From Automated to Manual Setup

## Overview

This guide helps users transition from the previous automated installation methods to the new manual setup approach. If you were using the automated installation scripts, follow these steps to migrate to the manual configuration system.

## Why the Change?

The automated installation scripts have been removed in favor of a manual setup approach because:

1. **Greater Control**: Manual setup gives you full visibility and control over what gets installed
2. **Simpler Maintenance**: Easier to troubleshoot and customize without complex installation logic
3. **Better Security**: You can review and understand every file being copied to your system
4. **Cleaner Codebase**: Removes complex installation automation that was difficult to maintain
5. **Future-Proof**: Manual setup will be compatible with the planned CLI tool

## Pre-Migration Assessment

### Check Your Current Setup

First, determine what type of installation you currently have:

```bash
# Check if you have the old automated setup
ls -la ~/

# Look for these indicators of automated installation:
# - ~/.claude/ directory (this should exist)
# - Various shell aliases or modifications
# - Installed dependencies like uv, ruff, etc.

# Check your shell configuration for added aliases
grep -i claude ~/.bashrc ~/.zshrc ~/.profile 2>/dev/null
```

### Backup Your Current Configuration

Before migrating, backup your existing setup:

```bash
# Backup your current Claude configuration
cp -r ~/.claude ~/.claude.backup.$(date +%Y%m%d)

# Backup shell configuration
cp ~/.bashrc ~/.bashrc.backup.$(date +%Y%m%d)
cp ~/.zshrc ~/.zshrc.backup.$(date +%Y%m%d) 2>/dev/null || true
```

## Migration Steps

### Step 1: Clean Up Automated Installation Artifacts

Remove artifacts from the old automated installation:

```bash
# Remove any install scripts that might be in your PATH
which install-claude-template 2>/dev/null && rm $(which install-claude-template)

# Check for and remove automated installation aliases
# Edit your shell configuration file and remove lines like:
# alias claude-setup="..."
# alias update-claude-config="..."
```

**Edit your shell configuration**:
```bash
# Open your shell configuration
nano ~/.bashrc  # or ~/.zshrc

# Remove any lines added by the automated installer
# Look for sections like:
# # Claude Code Template Setup
# # Auto-generated by claude-code-template installer
```

### Step 2: Verify Current Configuration

Check what configuration you currently have:

```bash
# List your current Claude configuration
ls -la ~/.claude/

# Check agents
ls ~/.claude/agents/foundation/
ls ~/.claude/agents/specialists/

# Check commands  
ls ~/.claude/commands/

# Verify settings files
cat ~/.claude/settings.json
cat ~/.claude/settings.local.json
```

### Step 3: Update to Latest Configuration

Download the latest template and update your configuration:

```bash
# Download the latest template (or use your existing clone)
git clone https://github.com/yourusername/claude-code-template.git /tmp/claude-template-latest
cd /tmp/claude-template-latest

# Update your configuration with the latest files
cp -r .claude/* ~/.claude/

# Verify the update
ls -la ~/.claude/
```

### Step 4: Clean Up Environment Variables

Review and clean up environment variables:

```bash
# Check current environment variables
env | grep -E "(CLAUDE|PERPLEXITY|GITHUB)"

# Review your shell configuration for environment variables
grep -E "(CLAUDE|PERPLEXITY|GITHUB)" ~/.bashrc ~/.zshrc ~/.profile 2>/dev/null
```

**Standardize environment variable setup**:
```bash
# Remove any old environment variable setups
# Edit your shell configuration and ensure you have clean, simple setup:

# Add to ~/.bashrc (or ~/.zshrc):
export CLAUDE_API_KEY="your-api-key-here"
export PERPLEXITY_API_KEY="your-perplexity-key-here"  # Optional
export GITHUB_TOKEN="your-github-token-here"          # Optional
```

### Step 5: Remove Automated Dependencies

Clean up dependencies that were automatically installed:

```bash
# Check what was installed by the automated script
# You may want to keep these tools, but they're no longer required for the template

# Check if uv was installed
which uv

# Check if additional Python tools were installed globally
pip list | grep -E "(ruff|pytest|black)"

# Check if any global npm packages were installed
npm list -g | grep -E "(claude|anthropic)"
```

**Decision Point**: You can keep these tools if you use them, or remove them if they were only installed for the template.

### Step 6: Verify Migration Success

Test your migrated setup:

```bash
# Start Claude Code and test basic functionality
claude

# In Claude Code, test these commands:
/review
/agents-guide
/stacks
/discuss

# Verify agents are working by asking for a complex task
# Example: "Review this code and suggest improvements"
```

## Common Migration Issues

### Issue 1: Commands Not Working After Migration

**Symptoms**: Slash commands like `/review` not recognized
**Cause**: Commands directory not properly copied or permissions issues

**Solution**:
```bash
# Re-copy commands directory
rm -rf ~/.claude/commands
cp -r .claude/commands ~/.claude/

# Fix permissions
chmod -R 644 ~/.claude/commands/
find ~/.claude/commands -type d -exec chmod 755 {} \;
```

### Issue 2: Agents Not Responding

**Symptoms**: Agents not being invoked automatically
**Cause**: Agent files missing or corrupted

**Solution**:
```bash
# Re-copy agents directory
rm -rf ~/.claude/agents
cp -r .claude/agents ~/.claude/

# Verify agent files exist
ls ~/.claude/agents/foundation/
ls ~/.claude/agents/specialists/
```

### Issue 3: Environment Variables Not Available

**Symptoms**: API key errors or authentication failures
**Cause**: Environment variables not properly set after cleanup

**Solution**:
```bash
# Check if variables are set
echo $CLAUDE_API_KEY

# If not set, add to shell configuration
echo 'export CLAUDE_API_KEY="your-key"' >> ~/.bashrc
source ~/.bashrc
```

### Issue 4: Duplicate or Conflicting Configuration

**Symptoms**: Unexpected behavior or error messages about configuration conflicts
**Cause**: Old and new configuration files conflicting

**Solution**:
```bash
# Start fresh with a clean configuration
rm -rf ~/.claude
cp -r .claude ~/.claude
```

### Issue 5: Shell Aliases or Functions Interfering

**Symptoms**: Commands behaving differently than expected
**Cause**: Old aliases or functions from automated installation still active

**Solution**:
```bash
# Check for conflicting aliases
alias | grep -i claude

# Check for functions
declare -F | grep -i claude

# Remove any found aliases/functions from your shell configuration
```

## Verifying Successful Migration

### Checklist

- [ ] Claude Code starts without errors
- [ ] Slash commands work (`/review`, `/stacks`, etc.)
- [ ] Agents respond to complex requests
- [ ] Environment variables are available
- [ ] No old installation artifacts remain
- [ ] Configuration is up to date with latest template

### Testing Commands

```bash
# Test basic functionality
claude --version

# Test configuration loading
ls ~/.claude/agents/foundation/ | wc -l  # Should show 6 foundation agents

# Test environment variables
echo "Claude API Key set: $([[ -n "$CLAUDE_API_KEY" ]] && echo "Yes" || echo "No")"
```

### Test in Claude Code

Once migrated, test these scenarios in Claude Code:

1. **Basic command**: `/stacks` - Should list available technology stacks
2. **Agent coordination**: Ask for a code review - Should see multiple agents working
3. **Research capability**: Ask about current best practices - Should use research tools
4. **Complex task**: Request architecture advice - Should coordinate multiple agents

## Post-Migration Optimization

### Customize for Your Workflow

After successful migration:

1. **Review agent definitions**: Customize agents for your specific needs
2. **Create custom commands**: Add commands for your common workflows  
3. **Update project guidelines**: Modify `CLAUDE.md` for your projects
4. **Optimize environment**: Set up any additional tools you need

### Stay Updated

To keep your configuration current:

1. **Watch the repository**: Get notifications for template updates
2. **Periodic updates**: Periodically pull latest agent and command definitions
3. **Backup before updates**: Always backup before applying updates

```bash
# Update process
cp -r ~/.claude ~/.claude.backup.$(date +%Y%m%d)
git pull origin main  # In your template repository
cp -r .claude/* ~/.claude/
```

## Getting Help

If you encounter issues during migration:

1. **Check the troubleshooting section** in the [Manual Setup Guide](manual-setup-guide.md)
2. **Review the Configuration Reference** for detailed file explanations
3. **Start with a clean slate** if problems persist - backup and reinstall
4. **Report persistent issues** in the repository's issue tracker

## Future CLI Tool Compatibility

The manual setup you're migrating to is designed to be fully compatible with the planned CLI tool. When the CLI tool is released:

- Your manual configuration will work without changes
- The CLI tool will manage updates and validation
- You can choose to continue with manual management or use the CLI tool

Your investment in migrating to manual setup now will pay off when the CLI tool becomes available.

---

*Need help with migration? Create an issue in the repository with details about your current setup and any errors you encounter.*